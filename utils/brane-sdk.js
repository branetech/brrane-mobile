var t=class t{constructor(e){this.model=t.MODEL1;this.serviceProvider="vtpass";this.rebate=0;this.gateway="FCMB";this.gatewayRate=.5/100;this.gatewayCap=100;this.serviceProvider=(e==null?void 0:e.serviceProvider)||"vtpass",this.serviceType=e==null?void 0:e.serviceType,this.serviceId=e==null?void 0:e.serviceId,this.amount=e.amount,this.model=(e==null?void 0:e.model)||t.MODEL1,["cable","electricity"].includes(String(this.serviceType).toLocaleLowerCase())&&(this.serviceProvider="vtpass"),["airtime","data"].includes(String(this.serviceType).toLocaleLowerCase())&&(this.serviceProvider="vtpass",["mtn","9mobile","glo"].includes(String(this.serviceId).toLocaleLowerCase())&&(this.serviceProvider="interswitch")),this.gateway=(e==null?void 0:e.gateway)||"FCMB",this.gatewayRate=.5/100,this.gatewayCap=100,this.setGateway()}setGateway(){String((this==null?void 0:this.gateway)||"").toLowerCase().includes("paystack")&&(this.gateway="PAYSTACK",this.gatewayRate=1.5/100,this.gatewayCap=2e3)}getSharedNFactor(){return this.model===t.MODEL1?80:this.model===t.MODEL2?60:this.model===t.MODEL3?30:0}getRebateValue(){let e=this.serviceId,i=this.serviceType,s=this.serviceProvider;if(s==="interswitch"&&i==="betting")return .5;if(s==="interswitch"&&i==="electricty")return"60";if(s==="vtpass"&&i==="betting")return 0;let l=`${s==null?void 0:s.toLowerCase()}-${e==null?void 0:e.toLowerCase()}`;return t.rebateRateMap[l]&&t.rebateRateMap[l]||0}getGatewayFee(){let e=this.amount*this.gatewayRate;return Math.min(e,this.gatewayCap)}getShares(){let e=this.getSharedNFactor(),i=e/100,s=(100-e)/100,l=Number(this.amount||0),c=this.getRebateValue(),a=typeof c=="string"?Number(c):l*(Number(c)/100),o=this.getGatewayFee();if(this.model===t.MODEL1){let r=a*s;return{bracValue:a-r-o,rate:c,commissionVal:a,braneProfit:r,allocatable:a-o,paymentGatewayFees:o}}if(this.model===t.MODEL2){let r=a-o,n=r*s;return{bracValue:r*i,rate:c,commissionVal:a,braneProfit:n,allocatable:r,paymentGatewayFees:o}}if(this.model===t.MODEL3){let r=a-a*i,n=a-r,b=n-o;return{bracValue:r,rate:c,commissionVal:a,braneProfit:b,allocatable:n,paymentGatewayFees:o}}return{bracValue:0,rate:0,commissionVal:0,braneProfit:0,allocatable:0,paymentGatewayFees:0}}};t.MODEL1="model1",t.MODEL2="model2",t.MODEL3="model3",t.rebateRateMap={"interswitch-mtn":2.6,"interswitch-airtel":3,"interswitch-glo":4.5,"interswitch-9mobile":6,"interswitch-gotv":1,"interswitch-dstv":1,"interswitch-startimes":1,"vtpass-abedc":1,"vtpass-aedc":1.2,"vtpass-bedc":1.5,"vtpass-ekedc":1.4,"vtpass-eedc":1.4,"vtpass-ibedc":1.1,"vtpass-ikedc":1,"vtpass-jed":.9,"vtpass-kaedco":1.5,"vtpass-kedco":1,"vtpass-phed":2,"vtpass-yedc":1.2,"vtpass-dstv":1.5,"vtpass-gotv":1.5,"vtpass-startimes":2,"vtpass-showmax":1.5,"vtpass-spectranet":3,"vtpass-smile network":5,"vtpass-mtn":3,"vtpass-airtel":3.4,"vtpass-glo":4,"vtpass-9mobile":4,"interswitch-spectranet":3,"interswitch-smile network":3},t.getBracs=e=>new t(e).getShares();var m=t,d=m;export{m as Brane,d as default};
